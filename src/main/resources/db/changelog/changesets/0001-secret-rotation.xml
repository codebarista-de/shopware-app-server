<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <!--
        Uses raw SQL instead of <addColumn> because Liquibase's AddColumnGeneratorSQLite
        recreates the entire table when adding columns, which drops UNIQUE constraints.
        Raw ALTER TABLE ADD COLUMN preserves existing constraints on SQLite.
    -->
    <changeSet author="Codebarista" id="secret-rotation" context="app-server-core">
        <sql>ALTER TABLE SHOPWARE_SHOP ADD COLUMN PENDING_SHOP_SECRET TEXT</sql>
        <sql>ALTER TABLE SHOPWARE_SHOP ADD COLUMN PENDING_SHOP_URL TEXT</sql>
        <sql>ALTER TABLE SHOPWARE_SHOP ADD COLUMN REREGISTRATION_REQUIRES_SHOP_SIGNATURE BOOLEAN DEFAULT FALSE</sql>
    </changeSet>
</databaseChangeLog>
